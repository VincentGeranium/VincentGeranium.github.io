---
layout: post
title:  "기본 문법 공부(프로토콜(protocol) - 프로토콜의 선택적 요구, )"
date:   2020-04-22
categories: iOS, Swift
---

이 포스트는 야곰님의 Swift 프로그래밍 2판을 보고 스스로 공부한 내용을 정리한 포스트 입니다.

- - -

### 예제 코드

- []()

- - -

### 참고 자료

- [Swift.org](https://docs.swift.org/swift-book/LanguageGuide/Protocols.html)

- - -

### 프로토콜의 선택적 요구

- 프로토콜의 요구사항 중 일부를 선택적 요구사항으로 지정할 수 있다.

- 다만 먼저 고려해야 할 사항이 있다.

    - 선택적 요구사항을 정의하고 싶은 프로토콜은 '@objc' 속성이 부여된 프로토콜이어야 한다.
    
    - '@objc' 속성은 해당 프로토콜을 'Objective-C' 코드에서 사용할 수 있도록 만드는 역활을 한다.
    
- 해당 프로토콜을 'Objective-C' 코드와 공유하고 싶지 않더라도, 혹은 프로젝트를 'Objective-C' 코드와 공유하지 않더라도 '@objc' 속성이 부여되어야만 선택적 요구사항을 정의할 수 있다.

- 여기서 더 생각해보아야 할 것은 '@objc' 속성이 부여되는 프로토콜은 'Objective-C' 클래스를 상속받은 클래스에서만 채택할 수 있다는 것이다.

    - 즉, 열거형이나 구조체 등에서는 '@objc' 속성이 부여된 프로토콜은 아예 채택할 수 없다.
    
- '@objc' 속성을 사용하려면 애플의 'Foundation 프레임워크 모듈'을 import 해야 한다.

- 선택적 요구를 하면 프로토콜을 준수하는 타입에 해당 요구사항을 필수로 구현할 필요가 없다.

- 선택적 요구사항은 'optional' 식별자를 요구사항의 정의 앞에 붙여주면 된다.

- 만약 메서드나 프로퍼티를 선택적 요구사항으로 요구하게 되면 그 요구사항의 타입은 자동적으로 옵셔널이 된다.

    - 예를 들어 (Int) -> String 타입의 메서드는 ((Int) -> String)? 타입이 된다.
    
    - 메서드의 매개변수나 반환 타입이 옵셔널이 된 것이 아니라 메서드(함수) 자체의 타입이 옵셔널이 된 것이다.
    
- 선택적 요구사항은 그 프로토콜을 준수하는 타입에 구현되어 있지 않을 수 있기 때문에 옵셔널 체이닝을 통해 호출할 수 있다.

    - 프로퍼티뿐만 아니라 메서드도 마찬가지이다.

<img width="1058" alt="protocolExampleImage-18" src="">

- 위 코드의 Moveable 프로토콜은 선택적 요구사항인 fly() 메서드를 포함하므로 @objc 속성을 부여했다.

- @objc 속성의 프로토콜을 사용하기 위해 Tiger와 Bird는 각각 Objective-C 클래스인 NSObject를 상속받았다.

- Tiger는 날 수 없으므로 fly() 메서드를 구현하지 않았다.

- Bird는 날 수 있으므로 fly() 메서드를 구현했다.

- 각 클래스의 인스턴스를 구현하여 사용할 때는 타입에 메서드가 구현되어 있는지 확인할 수 있지만, Moveable 프로토콜 타입 변수에 할당되었을 때는 인스턴스의 타입에 실제로 fly() 메서드가 구현되어 있는지 알 수 없으므로 옵셔널 체인을 이용하여 fly() 메서드 호출을 시도한다.

    - 옵셔널 체인을 사용할 때는 메서드 이름 뒤에 물음표를 붙여 표현한다.